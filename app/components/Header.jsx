"use client";
import Link from "next/link";
import { useEffect, useState } from "react";
import { usePathname } from "next/navigation";

export default function Header() {
  const [isNavbarActive, setIsNavbarActive] = useState(false);
  const pathname = usePathname();
  const [currPath, setCurrPath] = useState("");

  useEffect(() => {
    setCurrPath(pathname);
  }, [pathname]);

  useEffect(() => {
    function handleScroll() {
      const styledHeader = document.querySelector(".navbar");
      const navbarHeight = styledHeader.getBoundingClientRect().height;

      if (window.scrollY > navbarHeight) {
        setIsNavbarActive(true);
      } else {
        setIsNavbarActive(false);
      }
    }

    window.addEventListener("scroll", handleScroll);

    return () => {
      window.removeEventListener("scroll", handleScroll);
    };
  }, []);
  return (
    <>
      <section className="header">
        <nav className="navbar">
          <div
            className={`container--default ${
              isNavbarActive ? "navbar--active" : ""
            }`}
          >
            <div className="flex justify-between container__inner">
              <div className="flex items-center mr-6 min-h-[3.75rem]">
                <Link href="/" className="w-15">
                  <span className="w-auto h-auto ">
                    <svg
                      className="w-auto h-5"
                      width="43"
                      height="17"
                      viewBox="0 0 44 18"
                    >
                      <path
                        className="cls-1"
                        d="M0,.48H11.57V1.7H4.12V7.47s4.78-.03,4.78,0-.9,1.83-.9,1.83h-3.88v5.73h7.55v1.24H0V.48Z"
                      />
                      <polygon
                        className="cls-1"
                        points="42.74 2.18 42.74 .97 31.22 .97 31.22 16.75 32.9 16.75 35.31 16.75 35.35 16.75 35.35 10.46 39.38 10.46 40.23 8.44 35.35 8.44 35.35 2.18 42.74 2.18"
                      />
                      <path
                        className="cls-1"
                        d="M21.97,16.71c-5.4,.03-9.43-2.57-9.43-8.03,.03-2.89,.98-4.92,3.11-6.59C17.58,.5,19.97-.02,22.58,0c2.38,0,4.37,1.1,5.32,1.68l-.63,1.26c-1.35-1.13-3.16-1.69-4.9-1.71-1.71-.02-3.44,1.05-4.3,2.51-.44,.75-.72,1.57-.85,2.43-.36,2.33-.07,4.88,1.69,6.59,1.02,1,2.4,1.59,3.83,1.63,.33,0,.67,.01,.99-.04,1.82-.3,3.12-1.15,4.25-1.96l-.53,2.92c-1.2,.59-3.02,1.4-5.46,1.4Z"
                      />
                    </svg>
                  </span>
                </Link>
              </div>

              <div className="navbar__content--bottom md:navbar__content">
                <ul className="navbar__menu">
                  <li
                    className={`navbar__item ${currPath === "/" ? "on" : ""}`}
                  >
                    <Link className="gfont" href="/">
                      <span>
                        <svg
                          className="color--gray"
                          width="19"
                          height="21"
                          viewBox="0 0 14 16"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path d="M1 14.3845H4.69225V9.3075C4.69225 9.07867 4.76967 8.88683 4.9245 8.732C5.07933 8.57733 5.27117 8.5 5.5 8.5H8.5C8.72883 8.5 8.92067 8.57733 9.0755 8.732C9.23033 8.88683 9.30775 9.07867 9.30775 9.3075V14.3845H13V5.69225C13 5.58958 12.9776 5.49658 12.9328 5.41325C12.8879 5.32992 12.827 5.25625 12.75 5.19225L7.3655 1.1345C7.26283 1.04483 7.141 1 7 1C6.859 1 6.73717 1.04483 6.6345 1.1345L1.25 5.19225C1.173 5.25625 1.11208 5.32992 1.06725 5.41325C1.02242 5.49658 1 5.58958 1 5.69225V14.3845ZM0 14.3845V5.69225C0 5.43642 0.0572499 5.19408 0.17175 4.96525C0.286083 4.73642 0.44425 4.548 0.64625 4.4L6.03075 0.323C6.31258 0.107666 6.63467 0 6.997 0C7.35933 0 7.68342 0.107666 7.96925 0.323L13.3538 4.4C13.5558 4.548 13.7139 4.73642 13.8283 4.96525C13.9428 5.19408 14 5.43642 14 5.69225V14.3845C14 14.6525 13.9003 14.8862 13.701 15.0855C13.5017 15.2848 13.268 15.3845 13 15.3845H9.1155C8.8865 15.3845 8.69467 15.3071 8.54 15.1523C8.38517 14.9974 8.30775 14.8056 8.30775 14.5768V9.5H5.69225V14.5768C5.69225 14.8056 5.61483 14.9974 5.46 15.1523C5.30533 15.3071 5.1135 15.3845 4.8845 15.3845H1C0.732 15.3845 0.498334 15.2848 0.299 15.0855C0.0996668 14.8862 0 14.6525 0 14.3845Z" />
                        </svg>
                      </span>
                      홈
                    </Link>
                  </li>
                  <li
                    className={`navbar__item ${
                      currPath === "/room-reservation" ? "on" : ""
                    }`}
                  >
                    <Link className="gfont" href="/room-reservation">
                      <span>
                        <svg
                          className="color--gray"
                          width="21"
                          height="22"
                          viewBox="0 0 18 19"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path d="M13.5 15.7307H11C10.8583 15.7307 10.7396 15.6827 10.6438 15.5867C10.5479 15.4907 10.5 15.3718 10.5 15.23C10.5 15.0882 10.5479 14.9695 10.6438 14.874C10.7396 14.7785 10.8583 14.7307 11 14.7307H13.5V12.2307C13.5 12.0891 13.548 11.9703 13.644 11.8745C13.74 11.7787 13.8589 11.7307 14.0008 11.7307C14.1426 11.7307 14.2613 11.7787 14.3568 11.8745C14.4523 11.9703 14.5 12.0891 14.5 12.2307V14.7307H17C17.1417 14.7307 17.2604 14.7787 17.3563 14.8747C17.4521 14.9707 17.5 15.0897 17.5 15.2315C17.5 15.3733 17.4521 15.492 17.3563 15.5875C17.2604 15.683 17.1417 15.7307 17 15.7307H14.5V18.2307C14.5 18.3724 14.452 18.4912 14.356 18.587C14.26 18.6828 14.1411 18.7307 13.9992 18.7307C13.8574 18.7307 13.7387 18.6828 13.6432 18.587C13.5477 18.4912 13.5 18.3724 13.5 18.2307V15.7307ZM1.6155 16.2307C1.15517 16.2307 0.770833 16.0766 0.4625 15.7682C0.154167 15.4599 0 15.0756 0 14.6152V3.84625C0 3.38592 0.154167 3.00158 0.4625 2.69325C0.770833 2.38492 1.15517 2.23075 1.6155 2.23075H3.3845V0.538499C3.3845 0.385833 3.43642 0.257917 3.54025 0.15475C3.64392 0.0515834 3.77242 0 3.92575 0C4.07908 0 4.20675 0.0515834 4.30875 0.15475C4.41058 0.257917 4.4615 0.385833 4.4615 0.538499V2.23075H9.6155V0.5C9.6155 0.358333 9.66342 0.239583 9.75925 0.14375C9.85525 0.0479167 9.97417 0 10.116 0C10.2578 0 10.3765 0.0479167 10.472 0.14375C10.5677 0.239583 10.6155 0.358333 10.6155 0.5V2.23075H12.3845C12.8448 2.23075 13.2292 2.38492 13.5375 2.69325C13.8458 3.00158 14 3.38592 14 3.84625V9.0385C14 9.18017 13.952 9.29892 13.856 9.39475C13.76 9.49058 13.6411 9.5385 13.4992 9.5385C13.3574 9.5385 13.2387 9.49058 13.1432 9.39475C13.0477 9.29892 13 9.18017 13 9.0385V7.84625H1V14.6152C1 14.7692 1.06408 14.9103 1.19225 15.0385C1.32042 15.1667 1.4615 15.2307 1.6155 15.2307H7.7885C7.93017 15.2307 8.04892 15.2787 8.14475 15.3747C8.24058 15.4707 8.2885 15.5897 8.2885 15.7315C8.2885 15.8733 8.24058 15.992 8.14475 16.0875C8.04892 16.183 7.93017 16.2307 7.7885 16.2307H1.6155ZM1 6.846H13V3.84625C13 3.69225 12.9359 3.55117 12.8078 3.423C12.6796 3.29483 12.5385 3.23075 12.3845 3.23075H1.6155C1.4615 3.23075 1.32042 3.29483 1.19225 3.423C1.06408 3.55117 1 3.69225 1 3.84625V6.846Z" />
                        </svg>
                      </span>
                      회의실 예약
                    </Link>
                  </li>
                  <li
                    className={`navbar__item ${
                      currPath === "/booking-history" ? "on" : ""
                    }`}
                  >
                    <Link className="gfont" href="/booking-history">
                      <svg
                        className="color--gray"
                        width="22"
                        height="24"
                        viewBox="0 0 18 12"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path d="M0.5 9C0.358333 9 0.239583 8.952 0.14375 8.856C0.0479167 8.76 0 8.64108 0 8.49925C0 8.35742 0.0479167 8.23875 0.14375 8.14325C0.239583 8.04775 0.358333 8 0.5 8H6.5C6.64167 8 6.76042 8.048 6.85625 8.144C6.95208 8.24 7 8.35892 7 8.50075C7 8.64258 6.95208 8.76125 6.85625 8.85675C6.76042 8.95225 6.64167 9 6.5 9H0.5ZM0.5 5C0.358333 5 0.239583 4.952 0.14375 4.856C0.0479167 4.76 0 4.64108 0 4.49925C0 4.35742 0.0479167 4.23875 0.14375 4.14325C0.239583 4.04775 0.358333 4 0.5 4H10.5C10.6417 4 10.7604 4.048 10.8563 4.144C10.9521 4.24 11 4.35892 11 4.50075C11 4.64258 10.9521 4.76125 10.8563 4.85675C10.7604 4.95225 10.6417 5 10.5 5H0.5ZM0.5 1C0.358333 1 0.239583 0.952 0.14375 0.856C0.0479167 0.76 0 0.641083 0 0.499249C0 0.357416 0.0479167 0.23875 0.14375 0.14325C0.239583 0.0477495 0.358333 0 0.5 0H10.5C10.6417 0 10.7604 0.0480002 10.8563 0.144C10.9521 0.24 11 0.358917 11 0.500751C11 0.642584 10.9521 0.761251 10.8563 0.856751C10.7604 0.952251 10.6417 1 10.5 1H0.5ZM12.8475 11.4788C12.7415 11.4788 12.643 11.4612 12.552 11.426C12.461 11.3907 12.3705 11.3281 12.2805 11.2383L10.3462 9.30375C10.2526 9.21025 10.2016 9.0965 10.1932 8.9625C10.1849 8.8285 10.2373 8.705 10.3503 8.592C10.4539 8.48833 10.5695 8.43558 10.697 8.43375C10.8247 8.43175 10.9436 8.484 11.0538 8.5905L12.85 10.3808L16.7405 6.4905C16.8378 6.393 16.9535 6.342 17.0875 6.3375C17.2215 6.333 17.345 6.38592 17.458 6.49625C17.5617 6.60642 17.6144 6.72433 17.6163 6.85C17.6183 6.97567 17.5641 7.09358 17.4538 7.20375L13.4155 11.2423C13.3282 11.3294 13.2382 11.3907 13.1455 11.426C13.0528 11.4612 12.9535 11.4788 12.8475 11.4788Z" />
                      </svg>
                      예약 내역
                    </Link>
                  </li>
                </ul>
              </div>
              <div className="flex items-center ml-6 min-h-[3.75rem]">
                <Link href="/my-page">
                  <span className="profile__box">
                    <svg
                      className="profile__icon"
                      width="16"
                      height="16"
                      viewBox="0 0 14 14"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path d="M7 6C6.175 6 5.46875 5.70625 4.88125 5.11875C4.29375 4.53125 4 3.825 4 3C4 2.175 4.29375 1.46875 4.88125 0.88125C5.46875 0.29375 6.175 0 7 0C7.825 0 8.53125 0.29375 9.11875 0.88125C9.70625 1.46875 10 2.175 10 3C10 3.825 9.70625 4.53125 9.11875 5.11875C8.53125 5.70625 7.825 6 7 6ZM0 12.1925V11.5847C0 11.1719 0.120167 10.7857 0.3605 10.426C0.601 10.0665 0.924417 9.78733 1.33075 9.5885C2.27442 9.136 3.21867 8.79658 4.1635 8.57025C5.10833 8.34408 6.05383 8.231 7 8.231C7.94617 8.231 8.89167 8.34408 9.8365 8.57025C10.7813 8.79658 11.7256 9.136 12.6693 9.5885C13.0756 9.78733 13.399 10.0665 13.6395 10.426C13.8798 10.7857 14 11.1719 14 11.5847V12.1925C14 12.486 13.9003 12.7324 13.701 12.9318C13.5017 13.1313 13.2552 13.231 12.9615 13.231H1.0385C0.744833 13.231 0.498334 13.1313 0.299 12.9318C0.0996668 12.7324 0 12.486 0 12.1925ZM1 12.231H13V11.5847C13 11.3629 12.9285 11.1546 12.7855 10.9597C12.6427 10.7649 12.4449 10.6002 12.1923 10.4655C11.3693 10.0668 10.5207 9.76142 9.6465 9.54925C8.77233 9.33708 7.89017 9.231 7 9.231C6.10983 9.231 5.22767 9.33708 4.3535 9.54925C3.47933 9.76142 2.63075 10.0668 1.80775 10.4655C1.55508 10.6002 1.35733 10.7649 1.2145 10.9597C1.0715 11.1546 1 11.3629 1 11.5847V12.231ZM7 5C7.55 5 8.02083 4.80417 8.4125 4.4125C8.80417 4.02083 9 3.55 9 3C9 2.45 8.80417 1.97917 8.4125 1.5875C8.02083 1.19583 7.55 1 7 1C6.45 1 5.97917 1.19583 5.5875 1.5875C5.19583 1.97917 5 2.45 5 3C5 3.55 5.19583 4.02083 5.5875 4.4125C5.97917 4.80417 6.45 5 7 5Z" />
                    </svg>
                  </span>
                </Link>
              </div>
            </div>
          </div>
        </nav>
      </section>
    </>
  );
}
